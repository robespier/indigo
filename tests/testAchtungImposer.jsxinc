/**
 * Setup
 */
Indigo.Tests.testAchtungImposer = function() {};
Indigo.Tests.testAchtungImposer.prototype = new Indigo.Tests.testSuite(app);
Indigo.Tests.testAchtungImposer.prototype.constructor = Indigo.Tests.testAchtungImposer;
Indigo.Tests.testAchtungImposer.prototype.name = 'testAchtungImposer';

Indigo.Tests.testAchtungImposer.prototype.setUp = function () {
	this.pocient = new Indigo.AchtungImposer(this.app);
	this.pocient.setup(this.getMockJob());
	this.pocient.templateFolder = this.testsFilesFolder + '/' + this.name;
};

/**
 * Test
 */
Indigo.Tests.testAchtungImposer.prototype.run = function() {
	this.pocient.run();
	// В первой папке задания должен лежать файл:
	// d9111001_002_ACHTUNG.pdf
	var result = this.assertFileExists(this.testsFilesFolder + this.testCommonPath + '001/d9111001_002_ACHTUNG.pdf');
	this.log(result, 'Achtung created in job folder');
	// В хотфолдере должен лежать его брат-близнец:
	var hotResult = this.assertFileExists(this.pocient.hotFolder + '/' + 'd9111001_002_ACHTUNG.pdf');
	this.log(hotResult, 'Achtung created in hot folder');
	// 
	// IO Exception handling
	//
	var shitExportPDF = this.assertThrows(this.pocient.exportPDF);
	this.log(shitExportPDF, 'Achtung throw exception on exportPDF()');
	var shitHotFolder = this.assertThrows(this.pocient.sendtoHotFolder);
	this.log(shitHotFolder, 'Achtung throw exception on sendtoHotFolder()');
};

/**
 * TearDown
 */
Indigo.Tests.testAchtungImposer.prototype.tearDown = function() {
	var testResult = new File(this.testsFilesFolder + this.testCommonPath + '001/d9111001_002_ACHTUNG.pdf');
	if (testResult.exists) { testResult.remove(); }
	var hotResult = new File(this.pocient.hotFolder + '/' + 'd9111001_002_ACHTUNG.pdf');
	if (hotResult.exists) { hotResult.remove(); }
};
