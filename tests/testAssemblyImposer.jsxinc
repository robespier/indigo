/**
 * 
 * @classdesc testAssemblyImposer
 * 
 * @constructor
 */
Indigo.Tests.testAssemblyImposer = function() {};
Indigo.Tests.testAssemblyImposer.prototype = new Indigo.Tests.testSuite(app);
Indigo.Tests.testAssemblyImposer.prototype.constructor = Indigo.Tests.testAssemblyImposer;
Indigo.Tests.testAssemblyImposer.prototype.name = 'testAssemblyImposer';

Indigo.Tests.testAssemblyImposer.prototype.setUp = function () {
	this.pocient = new Indigo.AssemblyImposer(this.app);
	this.pocient.setup(this.getMockJob());
	this.pocient.templateFolder = this.testsFilesFolder + '/' + this.name;
};

/**
 * Test
 * 
 * В 001 должен упасть d9111001_spaklevka_08_klei.pdf
 * В 002 должен упасть d9111002_spaklevka_1_5_klei.pdf
 * В хотфолдер рипа должны упасть оба двое
 */
Indigo.Tests.testAssemblyImposer.prototype.run = function() {
	this.pocient.run();
	this.assemblies = [
		this.testsFilesFolder + this.testCommonPath + '001/d9111001_spaklevka_08_klei.pdf',
		this.testsFilesFolder + this.testCommonPath + '002/d9111002_spaklevka_1_5_klei.pdf',
		this.pocient.hotFolder + '/' + 'd9111001_spaklevka_08_klei.pdf',
		this.pocient.hotFolder + '/' + 'd9111002_spaklevka_1_5_klei.pdf',
	];
	for (var i=0, l=this.assemblies.length; i < l; i++) {
		var result = this.assertFileExists(this.assemblies[i]);
		var message = (i < 2) ? 'PDF created in expected location' : 'PDF created in hot folder';
		this.log(result, message);
	}
	//
	// isNeed()
	//
	this.log(this.assertEq(this.pocient.isNeed(), true), 'isNeed() is always true');
};

/**
 * TearDown
 */
Indigo.Tests.testAssemblyImposer.prototype.tearDown = function() {
	for (var i=0, l=this.assemblies.length; i < l; i++) {
		var testResult = new File(this.assemblies[i]);
		if (testResult.exists) {
			testResult.remove();
		}
	}
};
